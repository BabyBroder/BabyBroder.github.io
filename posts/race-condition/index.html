<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Race Condition &#183; Doan Duc Anh</title>
<meta name=title content="Race Condition &#183; Doan Duc Anh"><meta name=description content="Techniques for Exploiting Race Conditions"><meta name=keywords content="CTF,exploitation,operating systems,vulnerability analysis,"><link rel=canonical href=https://babybroder.github.io/posts/race-condition/><link type=text/css rel=stylesheet href=/css/main.bundle.min.167f25056d0978d9a2c0fa3f8cfb2aec08d0878a4108dfdb0895f7105e9013fc75f2c9ed76a2f4829ec3501ca3fe1e9fcd70339a82aedca984ecf6faecf6b942.css integrity="sha512-Fn8lBW0JeNmiwPo/jPsq7AjQh4pBCN/bCJX3EF6QE/x18sntdqL0gp7DUByj/h6fzXAzmoKu3KmE7Pb67Pa5Qg=="><script type=text/javascript src=/js/appearance.min.f0df558c77cac7fb481f01db6bc7870a5b9be171f4fe5994ef688ae872ba3c35dc9382632fa8a5afc2ede7e6e0f51a32d3b0846fe5f077b8c9dda1206b96b6e3.js integrity="sha512-8N9VjHfKx/tIHwHba8eHClub4XH0/lmU72iK6HK6PDXck4JjL6ilr8Lt5+bg9Roy07CEb+Xwd7jJ3aEga5a24w=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.a2d78d78672e549fbfc972ece871725b5478ba0b65708dda20cb97ab80a865eae6d247e1b05a4aec6ebbf78647ec3233bad8b2609ed98eee53cd58aa17128bc7.js integrity="sha512-oteNeGcuVJ+/yXLs6HFyW1R4ugtlcI3aIMuXq4CoZerm0kfhsFpK7G6794ZH7DIzutiyYJ7Zju5TzViqFxKLxw==" data-copy data-copied></script><script src=/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://babybroder.github.io/posts/race-condition/"><meta property="og:site_name" content="Doan Duc Anh"><meta property="og:title" content="Race Condition"><meta property="og:description" content="A discussion on race conditions, their underlying causes in operating systems, and how attackers can leverage them to exploit vulnerabilities."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-03T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-03T00:00:00+00:00"><meta property="article:tag" content="CTF"><meta property="article:tag" content="Exploitation"><meta property="article:tag" content="Operating Systems"><meta property="article:tag" content="Vulnerability Analysis"><meta property="og:image" content="https://babybroder.github.io/posts/race-condition/featured.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://babybroder.github.io/posts/race-condition/featured.png"><meta name=twitter:title content="Race Condition"><meta name=twitter:description content="A discussion on race conditions, their underlying causes in operating systems, and how attackers can leverage them to exploit vulnerabilities."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Race Condition","headline":"Race Condition","description":"A discussion on race conditions, their underlying causes in operating systems, and how attackers can leverage them to exploit vulnerabilities.","abstract":"Techniques for Exploiting Race Conditions","inLanguage":"en","url":"https:\/\/babybroder.github.io\/posts\/race-condition\/","author":{"@type":"Person","name":"Broder"},"copyrightYear":"2025","dateCreated":"2025-01-03T00:00:00\u002b00:00","datePublished":"2025-01-03T00:00:00\u002b00:00","dateModified":"2025-01-03T00:00:00\u002b00:00","keywords":["CTF","exploitation","operating systems","vulnerability analysis"],"mainEntityOfPage":"true","wordCount":"2722"}]</script><meta name=author content="Broder"><link href=https://github.com/BabyBroder rel=me><link href=https://t.me/odanbroder rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Doan Duc Anh</span>
<img src=/img/avatar/beautifulEYES.jpg width=368 height=368 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Doan Duc Anh"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Doan Duc Anh</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 32v448h448V32H0zm21.2 197.2H21c.1-.1.2-.3.3-.4.0.1.0.3-.1.4zm218 53.9V384h-31.4V281.3L128 128h37.3c52.5 98.3 49.2 101.2 59.3 125.6 12.3-27 5.8-24.4 60.6-125.6H320l-80.8 155.1z"/></svg></span></span><p class="text-base font-medium" title=Tags>Tags</p></a><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400" style=margin-right:5px><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 32v448h448V32H0zm21.2 197.2H21c.1-.1.2-.3.3-.4.0.1.0.3-.1.4zm218 53.9V384h-31.4V281.3L128 128h37.3c52.5 98.3 49.2 101.2 59.3 125.6 12.3-27 5.8-24.4 60.6-125.6H320l-80.8 155.1z"/></svg></span></div><p class="text-bg font-bg" title=Tags>Tags</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title></p></a></li></ul></div></label></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/posts/race-condition/featured_hu410097028235500667.png)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Race Condition</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-01-03T00:00:00+00:00>3 January 2025</time><span class="px-2 text-primary-500">&#183;</span><span>2722 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">13 mins</span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=Broder src=/img/avatar/favor_hu9132319482372723051.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Broder</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Only the ones who have a true passion for mastering security truly stand out.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/BabyBroder target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://t.me/odanbroder target=_blank aria-label=Telegram rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#race-conditions-in-reality><strong>Race Conditions in Reality</strong></a></li><li><a href=#why-should-you-care><strong>Why Should You Care?</strong></a></li></ul></li><li><a href=#what-is-a-race-condition>What is a Race Condition?</a><ul><li><a href=#race-condition-in-logic-circuits>Race Condition in Logic Circuits</a></li><li><a href=#race-condition-in-software>Race Condition in Software</a><ul><li><a href=#race-conditions>Race Conditions</a></li><li><a href=#how-race-conditions-happen>How Race Conditions Happen</a></li><li><a href=#security-risks>Security Risks</a></li></ul></li></ul></li><li><a href=#practical-example>Practical Example</a><ul><li><a href=#producer-consumer><em><strong>Producer-Consumer</strong></em></a><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a></li><li><a href=#key-changes>Key Changes</a></li></ul></li><li><a href=#bank-account><em><strong>Bank account</strong></em></a><ul><li><a href=#problem-1>Problem</a></li><li><a href=#solution-1>Solution</a></li><li><a href=#key-changes-1>Key Changes</a></li></ul></li></ul></li><li><a href=#race-conditions-in-operating-systems>Race Conditions in Operating Systems</a><ul><li><a href=#common-scenarios>Common Scenarios</a></li><li><a href=#real-world>Real-World</a><ul><li><a href=#notable-cves-related-to-race-conditions>Notable CVEs Related to Race Conditions</a></li></ul></li></ul></li><li><a href=#mitigation-techniques>Mitigation Techniques</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#race-conditions-in-reality><strong>Race Conditions in Reality</strong></a></li><li><a href=#why-should-you-care><strong>Why Should You Care?</strong></a></li></ul></li><li><a href=#what-is-a-race-condition>What is a Race Condition?</a><ul><li><a href=#race-condition-in-logic-circuits>Race Condition in Logic Circuits</a></li><li><a href=#race-condition-in-software>Race Condition in Software</a><ul><li><a href=#race-conditions>Race Conditions</a></li><li><a href=#how-race-conditions-happen>How Race Conditions Happen</a></li><li><a href=#security-risks>Security Risks</a></li></ul></li></ul></li><li><a href=#practical-example>Practical Example</a><ul><li><a href=#producer-consumer><em><strong>Producer-Consumer</strong></em></a><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a></li><li><a href=#key-changes>Key Changes</a></li></ul></li><li><a href=#bank-account><em><strong>Bank account</strong></em></a><ul><li><a href=#problem-1>Problem</a></li><li><a href=#solution-1>Solution</a></li><li><a href=#key-changes-1>Key Changes</a></li></ul></li></ul></li><li><a href=#race-conditions-in-operating-systems>Race Conditions in Operating Systems</a><ul><li><a href=#common-scenarios>Common Scenarios</a></li><li><a href=#real-world>Real-World</a><ul><li><a href=#notable-cves-related-to-race-conditions>Notable CVEs Related to Race Conditions</a></li></ul></li></ul></li><li><a href=#mitigation-techniques>Mitigation Techniques</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})(),function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=decodeURIComponent(t.attr("id")))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active").siblings("ul").hide()}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){e.find("a").parent("li").find("ul").hide(),n()})}}()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">Introduction<div id=introduction class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#introduction aria-label=Anchor>#</a></span></h2><p>Race conditions are a common yet critical issue in both <strong>digital systems</strong> and <strong>cybersecurity</strong>, where improper handling of simultaneous operations can cause unpredictable behavior. Whether in <strong>logic circuits</strong> or <strong>software applications</strong>, race conditions can lead to unexpected glitches, security vulnerabilities, and even full system compromises.</p><h3 class="relative group"><strong>Race Conditions in Reality</strong><div id=race-conditions-in-reality class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#race-conditions-in-reality aria-label=Anchor>#</a></span></h3><p>Imagine two people trying to withdraw money from the same bank account at the exact same time. If the system doesn&rsquo;t handle both requests properly, it might allow them to overdraw the account — resulting in unexpected or incorrect behavior. This scenario perfectly illustrates the essence of a <strong>race condition</strong>: when the outcome depends on the timing of events.</p><p>In the world of cybersecurity, race conditions have been at the heart of some of the most infamous vulnerabilities, such as the <a href=https://dirtycow.ninja/ target=_blank><strong>Dirty COW exploit (CVE-2016-5195)</strong></a>. These types of bugs allow attackers to manipulate a system by taking advantage of timing issues in how resources are accessed.</p><h3 class="relative group"><strong>Why Should You Care?</strong><div id=why-should-you-care class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#why-should-you-care aria-label=Anchor>#</a></span></h3><p>Race conditions aren&rsquo;t just an abstract concept in digital circuits or operating systems — they are a real-world problem that attackers can exploit to:</p><ul><li><strong>Bypass security controls</strong></li><li><strong>Gain unauthorized access</strong></li><li><strong>Corrupt or modify data</strong></li></ul><p>Understanding how race conditions occur, both in hardware and software, is essential for anyone working in <strong>system design</strong>, <strong>security analysis</strong>, or <strong>exploit development</strong>.</p><h2 class="relative group">What is a Race Condition?<div id=what-is-a-race-condition class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-is-a-race-condition aria-label=Anchor>#</a></span></h2><p>A race condition happens when two or more entities simultaneously access, modify, or interact with a shared resource. The outcome depends on the order and timing of these interactions. Because the entities operate independently, their actions can overlap, leading to unexpected results or conflicts. This unpredictability can disrupt processes that rely on consistent or coordinated use of the shared resource.</p><h3 class="relative group">Race Condition in Logic Circuits<div id=race-condition-in-logic-circuits class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#race-condition-in-logic-circuits aria-label=Anchor>#</a></span></h3><p>The race condition was first observed in logic circuits, where differences in propagation delays between circuit components can cause unintended glitches or incorrect outputs.</p><p>A <strong>race condition</strong> in a logic circuit occurs when the output depends on the timing of input signal changes, leading to unintended behavior or glitches. This happens due to differences in <strong>propagation delays</strong> of the logic gates involved.</p><p align=center><img src=img/Introduction/Race_condition_circuit_logic.png><p><em>The term race condition was already in use by 1954, for example in David A. Huffman&rsquo;s doctoral thesis &ldquo;The synthesis of sequential switching circuits&rdquo;.</em></p></p><ul><li>The circuit has one input signal: <strong>A</strong>.</li><li>It consists of:<ul><li>A <strong>NOT gate</strong> with a propagation delay of <strong>Δt₁</strong>.</li><li>An <strong>AND gate</strong> with a propagation delay of <strong>Δt₂</strong>.</li></ul></li></ul><p>Propagation delay refers to the time it takes for a signal to travel through a logic gate from input to output.</p><ul><li><p><strong>NOT gate delay (Δt₁)</strong>:<br>When the input <strong>A</strong> is fed into the NOT gate, it takes <strong>Δt₁</strong> units of time for the NOT gate to produce the correct output.</p></li><li><p><strong>AND gate delay (Δt₂)</strong>:<br>When the input signals arrive at the AND gate, it takes <strong>Δt₂</strong> units of time for the gate to produce the correct output.</p></li></ul><p>Let&rsquo;s assume the input <strong>A</strong> changes from <strong>low (0)</strong> to <strong>high (1)</strong>. The race condition occurs due to the following timing differences:</p><ul><li>The NOT gate inverts the input A with a propagation delay of Δt₁. The AND gate then combines the original input A with the inverted value A&rsquo; from the NOT gate. However, due to the delay in the NOT gate, A&rsquo; reaches the AND gate later than A, creating a timing mismatch. The AND gate also introduces its own delay of Δt₂, further contributing to the glitch that causes the race condition.</li></ul><p>When the input <strong>A</strong> changes from 0 to 1:</p><ol><li>The AND gate receives the original input <strong>A</strong> immediately.</li><li>The NOT gate takes <strong>Δt₁</strong> time to update its output.</li><li>The AND gate will output a <strong>short spike</strong> because it initially receives the old value from the NOT gate before the NOT gate&rsquo;s output stabilizes.</li></ol><p>The duration of this spike is:</p><pre tabindex=0><code>(Δt₁ + Δt₂) - Δt₂ = Δt₁
</code></pre><p><strong>Note</strong></p><ul><li>The sum of Δt₁ and Δt₂ represents the critical path — the longest path that a signal must travel through the circuit, determining the circuit&rsquo;s overall delay.</li></ul><h3 class="relative group">Race Condition in Software<div id=race-condition-in-software class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#race-condition-in-software aria-label=Anchor>#</a></span></h3><p>When I research Race Conditon, I wonder why race conditions in software are often detected later than hardware race conditions, even though both deal with concurrency issues.</p><p>There are a few primary keys involved</p><p><strong>Timing Sensitivity: Hardware Requires Precise Timing Detection</strong>.</p><ul><li>In hardware, timing is critical because circuits rely on exact timing of signals to function correctly. Even a tiny delay in signal propagation can cause a critical failure, such as setup/hold time violations or metastability in flip-flops.<ul><li>Since hardware is physically built and operates in real-time, race conditions must be detected early during the circuit design phase.</li><li>If a race condition in hardware goes undetected, it can cause permanent physical failures in chips, making the hardware unusable</li></ul></li></ul><p>→ Hardware race condition detection happens early because it&rsquo;s mission-critical to ensure circuits work reliably before they are manufactured.</p><p><strong>Software Race Conditions Depend on Runtime Behavior</strong>.</p><ul><li>In contrast, software race conditions are logical bugs that emerge based on runtime behavior, meaning they depend on how the program runs in a particular environment.<ul><li><strong>Concurrency isn&rsquo;t always deterministic:</strong> Software race conditions depend on the operating system&rsquo;s thread scheduling and hardware execution timing, which vary across different runs.</li><li><strong>They don&rsquo;t always manifest:</strong> Some race conditions might only occur under specific conditions (e.g., heavy system load or specific input sequences), making them hard to detect during development.</li><li><strong>Testing tools aren&rsquo;t perfect:</strong> Detecting software race conditions requires tools like ThreadSanitizer, Valgrind, or dynamic analysis tools, but these tools can slow down the program significantly, making it impractical to use them all the time.</li></ul></li></ul><p>→ Software race conditions may only be discovered later during testing or even after deployment, when they manifest in real-world use cases.</p><h4 class="relative group">Race Conditions<div id=race-conditions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#race-conditions aria-label=Anchor>#</a></span></h4><p>A <strong>race condition</strong> occurs in software when multiple code paths are executed concurrently, and the outcome depends on the timing of these operations. If the execution times of these paths vary unexpectedly, they may complete in an unintended order, leading to <strong>unanticipated behavior</strong> and <strong>software bugs</strong>. In some cases, race conditions can also arise between two or more separate programs, potentially resulting in <strong>security vulnerabilities</strong>.</p><h4 class="relative group">How Race Conditions Happen<div id=how-race-conditions-happen class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-race-conditions-happen aria-label=Anchor>#</a></span></h4><p>Race conditions typically occur in scenarios involving <strong>concurrent processes</strong> or <strong>multithreading</strong>. For example, when two threads attempt to access shared resources (such as files, memory, or hardware) simultaneously, without proper synchronization mechanisms, one thread might override or conflict with the other. This can lead to inconsistent data, crashes, or even security breaches.</p><h4 class="relative group">Security Risks<div id=security-risks class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#security-risks aria-label=Anchor>#</a></span></h4><p>Race conditions pose significant <strong>security risks</strong>, as attackers can exploit these timing issues to manipulate a program&rsquo;s execution. Some common attack vectors include:</p><ul><li><strong>Privilege Escalation</strong>: Exploiting timing vulnerabilities to gain unauthorized access or escalate user privileges.</li><li><strong>Data Corruption</strong>: Modifying or deleting critical data by manipulating the execution order of operations.</li><li><strong>Denial of Service (DoS)</strong>: Triggering unexpected behaviors that cause the system to crash or hang, disrupting normal operation.</li></ul><h2 class="relative group">Practical Example<div id=practical-example class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#practical-example aria-label=Anchor>#</a></span></h2><h3 class="relative group"><em><strong>Producer-Consumer</strong></em><div id=producer-consumer class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#producer-consumer aria-label=Anchor>#</a></span></h3><h4 class="relative group">Problem<div id=problem class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#problem aria-label=Anchor>#</a></span></h4><p>This <a href=code/example_race.c>code</a> demonstrates a <strong>race condition</strong> between two threads: a producer and a consumer. Both threads share a common resource, <code>products</code>, which is a variable that tracks the total number of produced and consumed products. The producer thread increments the <code>products</code> variable, and the consumer thread decrements it. Without proper synchronization, this code exhibits undefined behavior, leading to potential issues such as negative values for <code>products</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>products</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>producer</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>products</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>products</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;+------------------+</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;|Produced a product|</span><span class=se>\t</span><span class=s>Total products: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>consumer</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>products</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>products</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;+------------------+</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;|Consumed a product|</span><span class=se>\t</span><span class=s>Total products: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The main issue lies in the concurrent access to the shared resource <code>products</code> by both threads. Since the increment (<code>products++</code>) and decrement (<code>products--</code>) operations are not atomic, the threads can interfere with each other, causing incorrect results.</p><p>For example:</p><ol><li>The producer thread reads the value of <code>products</code>.</li><li>The consumer thread also reads the value of <code>products</code> (which has not been updated by the producer yet).</li><li>Both threads perform their operations (increment and decrement), leading to an incorrect final value of <code>products</code>, which can become a false update.</li></ol><p>In this code, I visualize the process of producing and consuming a product, where <code>products</code> is the shared variable of both threads. When I run this code, the value of <code>products</code> might be a false update.</p><p align=center><img src=img/Example/output_pro_con.png>
One output sample</p><h4 class="relative group">Solution<div id=solution class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#solution aria-label=Anchor>#</a></span></h4><p>To fix the race condition, we use <strong>mutexes</strong> to synchronize access to the shared resource. This ensures that only one thread at a time can access and modify the <code>products</code> variable, making the program&rsquo;s behavior predictable and correct.</p><h4 class="relative group">Key Changes<div id=key-changes class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-changes aria-label=Anchor>#</a></span></h4><ol><li><strong>Mutex Locking</strong>: We use <code>pthread_mutex_lock</code> before accessing <code>products</code> to ensure mutual exclusion, preventing both threads from modifying the variable simultaneously.</li><li><strong>Mutex Unlocking</strong>: After a thread has finished modifying the variable, it releases the lock with <code>pthread_mutex_unlock</code>, allowing the other thread to access the shared resource.</li></ol><p><a href=code/example_race_fix.c>code</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>producer</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>products</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>pthread_mutex_lock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>        <span class=n>products</span><span class=o>++</span><span class=p>;</span>                
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;+------------------+</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;|Produced a product|</span><span class=se>\t</span><span class=s>Total products: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>pthread_mutex_unlock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>consumer</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>products</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>pthread_mutex_lock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>        <span class=n>products</span><span class=o>--</span><span class=p>;</span>                 
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;+------------------+</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;|Consumed a product|</span><span class=se>\t</span><span class=s>Total products: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>pthread_mutex_unlock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group"><em><strong>Bank account</strong></em><div id=bank-account class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bank-account aria-label=Anchor>#</a></span></h3><p><em><strong>Note</strong></em></p><p>In a multi-threaded program, the operating system&rsquo;s scheduler decides when to switch between threads (called a context switch). However, context switches don&rsquo;t always happen exactly where we want during testing, making it hard to reproduce race conditions.</p><p>By inserting a small delay using <code>usleep(1)</code>. This increase the likelihood that the operating system will perform a context switch at that point and Force both threads to access shared resources at overlapping times, increasing the chances of a race condition.</p><h4 class="relative group">Problem<div id=problem-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#problem-1 aria-label=Anchor>#</a></span></h4><p>Without the delay, the program might run so fast that both operations complete before a context switch happens, making the race condition harder to observe.</p><p>In this <a href=code/example_race_bankaccount.c>code</a>, two threads perform deposit and withdrawal operations on a shared bank account balance. Due to the lack of proper synchronization, a race condition occurs, causing incorrect balance updates.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>balance</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>depositAmount</span> <span class=o>=</span> <span class=mi>500</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>withdrawAmount</span> <span class=o>=</span> <span class=mi>300</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span><span class=o>*</span> <span class=nf>deposit</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>arg</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>amount</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>arg</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>balance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>usleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>    <span class=n>balance</span> <span class=o>=</span> <span class=n>temp</span> <span class=o>+</span> <span class=n>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Deposit: +%d, New Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span><span class=o>*</span> <span class=nf>withdraw</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>arg</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>amount</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>arg</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>balance</span> <span class=o>&gt;=</span> <span class=n>amount</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>balance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>usleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>        <span class=n>balance</span> <span class=o>=</span> <span class=n>temp</span> <span class=o>-</span> <span class=n>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Withdraw: -%d, New Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Withdraw: -%d, Insufficient funds! Current Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The race condition occurs because two threads simultaneously access and update a shared bank account balance without synchronization. In this example, the deposit thread reads the balance as 1000 and calculates a new balance of 1500 after adding 500. Meanwhile, the withdrawal thread also reads the balance as 1000 and calculates a new balance of 700 after subtracting 300. Since both threads perform their operations based on the initial balance of 1000, the withdrawal thread overwrites the deposit result. This leads to an incorrect final balance of 700 instead of the expected 1200, demonstrating how concurrent access to shared data can cause inconsistent results.</p><p>The root cause of the issue is that both threads read outdated values of the shared balance variable before any updates occur. As a result, each thread performs calculations using incorrect data and then writes its result, overwriting the other thread&rsquo;s update.</p><p>For example:</p><ol><li>The deposit thread reads the balance as <code>1000</code>.</li><li>The withdrawal thread also reads the balance as <code>1000</code>, before the deposit thread has updated it.</li><li>The deposit thread calculates the new balance as <code>1500</code> (by adding <code>500</code>) and updates the balance.</li><li>The withdrawal thread calculates the new balance as <code>700</code> (by subtracting <code>300</code>) and overwrites the deposit thread’s result.</li></ol><p>In this code, the shared variable <code>balance</code> is accessed and modified by both threads without synchronization, causing a race condition. When I run this code, the final balance may be incorrect due to simultaneous operations, as the withdrawal thread can overwrite the deposit thread’s update.</p><p align=center><img src=img/Example/bank_account.png>
One output sample</p><h4 class="relative group">Solution<div id=solution-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#solution-1 aria-label=Anchor>#</a></span></h4><p>To fix the race condition in the bank account example, we use <strong>mutexes</strong> to synchronize access to the shared <code>balance</code> variable. This ensures that only one thread at a time can read or update the balance, preventing inconsistent results caused by simultaneous operations. By locking the critical section where the balance is accessed, the program&rsquo;s behavior becomes predictable and correct.</p><h4 class="relative group">Key Changes<div id=key-changes-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-changes-1 aria-label=Anchor>#</a></span></h4><ol><li><strong>Mutex Locking</strong>: We use <code>pthread_mutex_lock</code> before reading or modifying the <code>balance</code> variable to ensure mutual exclusion, preventing both the deposit and withdrawal threads from accessing the variable at the same time.</li><li><strong>Mutex Unlocking</strong>: After a thread completes its operation on the <code>balance</code> variable, it releases the lock using <code>pthread_mutex_unlock</code>, allowing the other thread to safely access the shared resource.</li><li><strong>Critical Section</strong>: The balance update logic is enclosed within the locked section to ensure that all read-modify-write operations are atomic and cannot be interrupted by another thread.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>pthread_mutex_t</span> <span class=n>lock</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>balance</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>depositAmount</span> <span class=o>=</span> <span class=mi>500</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>withdrawAmount</span> <span class=o>=</span> <span class=mi>300</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>deposit</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>amount</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=p>)</span><span class=n>arg</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>pthread_mutex_lock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>balance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>usleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>balance</span> <span class=o>=</span> <span class=n>temp</span> <span class=o>+</span> <span class=n>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Deposit: +%d, New Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>pthread_mutex_unlock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=nf>withdraw</span><span class=p>(</span><span class=kt>void</span> <span class=o>*</span><span class=n>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>amount</span> <span class=o>=</span> <span class=o>*</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=p>)</span><span class=n>arg</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>pthread_mutex_lock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>balance</span> <span class=o>&gt;=</span> <span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>balance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>usleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>balance</span> <span class=o>=</span> <span class=n>temp</span> <span class=o>-</span> <span class=n>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Withdraw: -%d, New Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Withdraw: -%d, Insufficient funds! Current Balance: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>balance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nf>pthread_mutex_unlock</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lock</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><a href=code/example_race_bankaccount_fix.c>code</a></p><h2 class="relative group">Race Conditions in Operating Systems<div id=race-conditions-in-operating-systems class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#race-conditions-in-operating-systems aria-label=Anchor>#</a></span></h2><p>Race conditions in operating systems occur when multiple processes or threads compete to access shared resources without proper synchronization. These issues can lead to unexpected behaviors, system crashes, data corruption, and security vulnerabilities. Understanding race conditions is critical for operating system developers, cybersecurity professionals, and CTF participants who explore kernel-level challenges.</p><h3 class="relative group">Common Scenarios<div id=common-scenarios class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#common-scenarios aria-label=Anchor>#</a></span></h3><ul><li><strong>File Access</strong>: Multiple processes accessing the same file simultaneously.</li><li><strong>Resource Allocation</strong>: Competing processes attempting to acquire system resources (e.g., memory, I/O devices).</li><li><strong>Inter-process Communication (IPC)</strong>: Race conditions in pipes, message queues, or shared memory.</li></ul><h3 class="relative group">Real-World<div id=real-world class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#real-world aria-label=Anchor>#</a></span></h3><p>Race conditions can have severe consequences, affecting system stability, security, and functionality. Here are some notable real-world examples:</p><ol><li><strong>Data Corruption</strong>: A race condition in a database system could corrupt critical data, leading to incorrect application behavior.</li><li><strong>System Crashes</strong>: Operating systems can crash if kernel-level race conditions corrupt essential structures.</li><li><strong>Security Breaches</strong>: Attackers can exploit race conditions to escalate privileges, bypass security checks, or inject malicious code.</li></ol><h4 class="relative group">Notable CVEs Related to Race Conditions<div id=notable-cves-related-to-race-conditions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#notable-cves-related-to-race-conditions aria-label=Anchor>#</a></span></h4><p>Race conditions are a common source of vulnerabilities in operating systems. Here are some notable CVEs:</p><ol><li><p><strong>CVE-2016-5195 (Dirty COW)</strong></p><ul><li><strong>Description</strong>: A race condition in the Linux kernel&rsquo;s memory subsystem allowed attackers to gain write access to read-only files, leading to privilege escalation.</li><li><strong>Impact</strong>: This vulnerability was widely exploited, affecting millions of Linux systems.</li><li><strong>Fix</strong>: The issue was patched by implementing proper synchronization in the kernel&rsquo;s memory management.</li></ul></li><li><p><strong>CVE-2021-3493</strong></p><ul><li><strong>Description</strong>: A race condition in the overlay filesystem in the Linux kernel allowed attackers to gain root privileges.</li><li><strong>Impact</strong>: Exploited in the wild to gain unauthorized access.</li><li><strong>Fix</strong>: The patch involved fixing the synchronization issue in the filesystem.</li></ul></li><li><p><strong>CVE-2014-4014</strong></p><ul><li><strong>Description</strong>: A race condition in the handling of user credentials in FreeBSD allowed attackers to hijack sessions.</li><li><strong>Impact</strong>: This vulnerability compromised the confidentiality and integrity of user sessions.</li><li><strong>Fix</strong>: Proper locking mechanisms were introduced to address the race condition.</li></ul></li></ol><p>&mldr;</p><p><em>Race conditions often appear in <strong>Capture the Flag (CTF)</strong> challenges, particularly in the <strong>pwnable</strong> category, where participants exploit kernel vulnerabilities to achieve privilege escalation.</em></p><h2 class="relative group">Mitigation Techniques<div id=mitigation-techniques class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#mitigation-techniques aria-label=Anchor>#</a></span></h2><ol><li><p><strong>Use Proper Synchronization Primitives</strong>:</p><ul><li>Mutexes</li><li>Semaphores</li><li>Spinlocks</li></ul></li><li><p><strong>Minimize Critical Sections</strong>:</p><ul><li>Reduce the amount of code executed within critical sections to minimize contention.</li></ul></li><li><p><strong>Implement Atomic Operations</strong>:</p><ul><li>Use atomic operations for shared resource access to ensure data consistency.</li></ul></li></ol><h2 class="relative group">Conclusion<div id=conclusion class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#conclusion aria-label=Anchor>#</a></span></h2><p>Race conditions are a critical issue in multi-threaded and multi-process systems, where the timing or order of operations can lead to unpredictable results or security vulnerabilities. Preventing race conditions requires careful design and the use of appropriate synchronization techniques. Proper synchronization is crucial to maintaining data integrity and ensuring that multi-threaded or multi-process programs function as expected.</p><p>For further learning, it’s essential to study concurrency and synchronization mechanisms specific to your programming environment and continue exploring best practices to avoid race conditions in complex systems.</p></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://babybroder.github.io/posts/race-condition/&amp;text=Race%20Condition" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://t.me/share/url?url=https://babybroder.github.io/posts/race-condition/&amp;resubmit=true&amp;title=Race%20Condition" title="Share via Telegram" aria-label="Share via Telegram"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/posts/pwnable.tw/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/posts/pwnable.tw/featured_hu10579450544654490803.png)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/pwnable.tw/>pwnable.tw</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-01-01T00:00:00+00:00>1 January 2025</time><span class="px-2 text-primary-500">&#183;</span><span>1975 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">10 mins</span></div></div><div class="py-1 prose dark:prose-invert"></div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script>var oid="views_posts/Race-Condition/index.md",oid_likes="likes_posts/Race-Condition/index.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/pwnable.tw/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">pwnable.tw</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-01-01T00:00:00+00:00>1 January 2025</time>
</span></span></a></span><span></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=https://www.linkedin.com/in/duc-anh-doan-67abb0333/ title>Linkedln</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href title></a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">Doan Duc Anh was here</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://babybroder.github.io/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>